# Учебный проект "Трекер привычек"

## Запуск проекта

1. Открыть терминал
2. С помощью команды `cd` перейти в каталог, где будет размещен проект
3. Выполнить команду для клонирования проекта
```bash
git clone https://github.com/arinazaikina/habit_tracker_drf_postgres_celery.git
```
4. Перейти в каталог проекта
```bash
cd habit_tracker_drf_postgres_celery
```
5. В корневой папке проекта создать файл `.env`
```bash
touch .env
```
6. Открыть файл
```bash
nano .env
```
7. Записать в файл следующие настройки

```
DJANGO_SERVER_URL=http://web:8000

POSTGRES_USER=
POSTGRES_DB=habit_db
POSTGRES_PORT=5432
POSTGRES_PASSWORD=
POSTGRES_HOST=db_habit
POSTGRES_HOST_AUTH_METHOD=trust

EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=

TG_BOT_TOKEN=

CELERY_BROKER_URL='redis://redis_habit:6379/0'
CELERY_RESULT_BACKEND='redis://redis_habit:6379/0'
```
Не менять значения `DJANGO_SERVER_URL=http://web:8000`, `POSTGRES_HOST=db_habit`, 
`CELERY_BROKER_URL='redis://redis_habit:6379/0'`, `CELERY_RESULT_BACKEND='redis://redis_habit:6379/0'`

В каталоге проекта есть шаблон `.env.template`

8. Запустить проект с помощью Docker, используя следующую команду:

```bash
docker-compose build --no-cache && docker-compose up
```

или

```bash
docker-compose  up -d
```

## Доступ к Swagger UI

Взаимодействие с API по следующему URL: http://0.0.0.0:80/swagger/

## Описание проекта

Проект представляет собой API для управления полезными привычками.

Основные функции приложения:

### Регистрация и авторизация

Пользователи могут зарегистрироваться в системе и войти в свою учетную запись,
чтобы получить доступ к персонализированным функциям.

При регистрации на указанный адрес электронной почты приходит приветственное сообщение
со ссылкой на Telegram-бота и кодом подключения.
Для подтверждения регистрации в Telegram-боте необходимо ввести команду `/start` и ввести
код подтверждения. Если введен корректный код, пользователь получает доступ к API приложения.

Пока пользователь не пройдет подтверждение регистрации в Telegram, он не сможет авторизоваться в системе.

После подтверждения регистрации в Telegram, пользователь может авторизоваться в API с помощью механизма токенов.

* Чтобы получить токен, сначала необходимо зарегистрироваться или войти в систему,
  передав свои учетные данные (электронную и пароль) на конечную точку `/api/login`.
  В ответе будет отправлен токен доступа.

* Для доступа к защищенным конечным точкам API, этот токен должен быть включен в заголовки
  всех последующих HTTP-запросов. Необходимо добавить его в заголовок `Authorization` следующим образом:
  `Authorization: Bearer ваш_токен`, где `ваш_токен` - это токен, который был получен при входе в систему.

### Управление привычками

Пользователи могут создавать новые привычки, указывая описание действия, время и место их выполнения,
а также периодичность повторения. Также имеется возможность привязывать приятные привычки к выполнению полезных.

### Напоминания

Приложение интегрировано с мессенджером Telegram для рассылки уведомлений и напоминаний о том,
когда и где нужно выполнить каждую привычку.

### Публичные привычки

Пользователи могут делать свои привычки публичными, чтобы другие пользователи могли просматривать их,
но без возможности редактирования или удаления.

### Права доступа

Каждый пользователь имеет доступ только к своим привычкам и может выполнять операции CRUD
(создание, чтение, обновление, удаление) только с собственными записями.

### Пагинация

Для удобства просмотра списка привычек реализована пагинация, которая выводит по 5 привычек на страницу.

### Безопасность

Настроен CORS для развернутого сервера, что позволяет фронтенду подключаться к проекту безопасно.

### Документация

Документация приложения содержит описание эндпоинтов и их работы, что поможет разработчикам фронтенда легко
использовать функционал приложения.

## Используемые технологии

В разработке проекта использовались следующие технологии:

* **Python**: основной язык программирования проекта.
* **Django Rest Framework (DRF)**: основной фреймворк для разработки API.
* **PostgreSQL**: система управления базами данных, которая используется для хранения и обработки данных.
* **Redis**: используется как брокер сообщений для Celery.
* **Celery**: используется для обработки асинхронных задач, таких как отправка рассылок по электронной почте,
  отправка напоминаний в Telegram
* **aiogram**: используется для создания и управления ботом Telegram, который взаимодействует с пользователями.
* **Docker**: используется для контейнеризации приложения
